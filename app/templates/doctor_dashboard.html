<!-- doctor_dashboard.html -->
{% extends "base.html" %}

{% block title %}Doctor Dashboard{% endblock %}

{% block extra_styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
{% endblock %}

{% block content %}
<div class="dashboard-container">
  <h2>Welcome, Dr. {{ current_user.name }}</h2>

  <div class="dashboard-sections">

    <!-- Create Program -->
    <div class="card">
      <h3>Create Program</h3>
      <form action="{{ url_for('doctor.create_program') }}" method="POST">
        {{ program_form.hidden_tag() }}
        <label for="name">Program Name</label>
        {{ program_form.name }}
        <label for="description">Description</label>
        {{ program_form.description }}
        <button type="submit" class="btn">Create</button>
      </form>
    </div>

    <!-- Enroll Client -->
    <div class="card">
      <h3>Enroll Client in Program</h3>
      <table>
        <thead>
          <tr>
            <th>Client Name</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for client in clients %}
          <tr>
            <td>{{ client.name }}</td>
            <td>
              <a href="{{ url_for('doctor.enroll_client', client_id=client.id) }}" class="btn">Enroll</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
<--Register New client-->
    <h3 class="mb-4">Register New Client</h3>
<form action="{{ url_for('doctor.register_client') }}" method="POST" class="row g-3">
  {{ client_form.hidden_tag() }}

  <div class="col-md-4">
    <label for="first_name" class="form-label">First Name</label>
    {{ client_form.first_name(class="form-control") }}
  </div>
  <div class="col-md-4">
    <label for="middle_name" class="form-label">Middle Name</label>
    {{ client_form.middle_name(class="form-control") }}
  </div>
  <div class="col-md-4">
    <label for="sir_name" class="form-label">Sir Name</label>
    {{ client_form.sir_name(class="form-control") }}
  </div>

  <div class="col-md-6">
    <label for="date_of_birth" class="form-label">Date of Birth</label>
    {{ client_form.date_of_birth(class="form-control") }}
  </div>
  <div class="col-md-6">
    <label for="gender" class="form-label">Gender</label>
    {{ client_form.gender(class="form-select") }}
  </div>

  <div class="col-md-6">
    <label for="national_id" class="form-label">National ID</label>
    {{ client_form.national_id(class="form-control") }}
  </div>
  <div class="col-md-6">
    <label for="birth_certificate" class="form-label">Birth Certificate</label>
    {{ client_form.birth_certificate(class="form-control") }}
  </div>

  <div class="col-md-6">
    <label for="country" class="form-label">Country</label>
    {{ client_form.country(class="form-control") }}
  </div>
  <div class="col-md-6">
    <label for="county" class="form-label">County</label>
    {{ client_form.county(class="form-control") }}
  </div>

  <div class="col-md-6">
    <label for="subcounty" class="form-label">Sub-county</label>
    {{ client_form.subcounty(class="form-control") }}
  </div>
  <div class="col-md-6">
    <label for="village" class="form-label">Village / Locality</label>
    {{ client_form.village(class="form-control") }}
  </div>

  <div class="col-md-6">
    <label for="contact_number" class="form-label">Contact Number</label>
    {{ client_form.contact_number(class="form-control") }}
  </div>
  <div class="col-md-6">
    <label for="address" class="form-label">Address</label>
    {{ client_form.address(class="form-control") }}
  </div>

  <div class="col-12">
    <button type="submit" class="btn btn-success">Register Client</button>
  </div>
</form>

    <!-- Search Clients -->
    <div class="card">
      <h3>Search Clients</h3>
      <form action="{{ url_for('doctor.search_client') }}" method="GET">
        <label for="query">Search by Name or ID</label>
        <input type="text" name="query" placeholder="Enter client name or ID" required>
        <button type="submit" class="btn">Search</button>
      </form>
    </div>

  </div>
</div>
{% endblock %}
